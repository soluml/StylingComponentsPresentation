<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Stylin’ Components</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
    <style>
      body {
        font-weight: 300;
      }

      #introslide {
        width: 100%;
        height: 100%;
        top: 0 !important;
      }
      #intro {
        border: 1.8vmax solid transparent;
        box-sizing: border-box;
        margin: auto;
        left: 50%;
        position: absolute;
        text-align: left;
        top: 50%;
        transform: translate(-50%, -50%);
        white-space: nowrap;
        width: 70%;
      }

      #intro:after {
        border: inherit;
        box-sizing: inherit;
        content: "";
        display: block;
        padding-bottom: 100%;
      }

      #intro span {
        font-size: 100%;
        position: absolute;
        left: 50%;
        top: 50%;
        text-align: center;
        font-weight: 900;
        transform: translate(-50%, -35%);
        -webkit-text-stroke: 2px rgba(255, 255, 255, 0.8);
        color: var(--r-background-color);
      }

      #intro small {
        display: block;
        font-size: 0.75em;
        line-height: 1;
      }

      #intro svg text {
        bottom: 0;
        fill: #fff;
        display: block;
        font-size: 0.0575rem;
        letter-spacing: 0.035em;
        text-transform: none;
        transform: translateY(2em);
        width: 100%;
      }

      #intro svg {
        opacity: 0.6;
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
      }

      .classCodeTitle {
        text-align: center !important;
        text-shadow: none;
      }
      .cssinlineeditor {
        align-items: center;
        display: grid;
        grid-template-columns: 1.25fr 1fr;
      }

      h4 {
        text-align: left;
      }

      h4 + ul {
        display: block;
        margin-bottom: 1em !important;
        text-align: left;
        width: 100%;
      }

      span[class^="hljs-selector"][data-spec0]:not(:has([data-spec0])) {
        align-items: baseline;
        display: inline-flex;
        gap: 0.25em;
      }

      span[class^="hljs-selector"][data-spec0]:not(:has([data-spec0]))::after {
        content: "(" attr(data-spec1) "," attr(data-spec2) "," attr(data-spec3)
          ")";
        font-size: 0.5em;
        font-weight: 400;
        pointer-events: none;
        user-select: none;
      }

      .cssapproach {
        align-items: center;
        color: rgba(255, 0, 0, 0.85);
        display: flex;
        font-weight: 400;
        gap: 0.1em;
        font-size: 3em;
        position: absolute;
        right: 100%;
        bottom: 0;
        transform: translate(-20%, 12%);
        text-align: right;
      }

      .cssapproach small {
        font-size: 0.31em;
        font-weight: 300;
        line-height: 1;
        padding-top: 0.25em;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section id="introslide">
          <h1 id="intro">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
              <path
                fill="#eee"
                d="M2.667 8l13.94-8 13.94 8 0.12 15.933-14.060 8.067-13.94-8zM5.451 11.308v6.343l4.46 2.48v4.688l5.296 3.061v-11.029zM27.769 11.308l-9.756 5.543v11.029l5.296-3.061v-4.685l4.46-2.481zM6.845 8.801l9.737 5.525 9.76-5.573-5.161-2.929-4.547 2.593-4.573-2.624z"
              ></path>
              <text x="5.1" y="31.6">
                github.com/soluml/StylingComponentsPresentation
              </text>
            </svg>
            <span>
              <small>Stylin’</small>
              Components
            </span>
          </h1>
        </section>
        <section>
          <img
            alt="CSS is awesome"
            src="/css-is-awesome.jpg"
            style="height: 60vh; aspect-ratio: 1088/826; opacity: 0.8"
          />
        </section>
        <section>
          <h2>What are we covering?</h2>
          <ol
            style="
              display: block;
              width: 30ch;
              margin: auto;
              position: relative;
            "
          >
            <li class="fragment">Relevant CSS Concepts</li>
            <li class="fragment">Popular CSS Conventions</li>
            <li class="fragment">
              Popular CSS Frameworks / Tooling
              <div class="fragment cssapproach">
                <small>CSS Approaches</small> {
              </div>
            </li>
          </ol>
        </section>
        <section>
          <h2>Considerations when <br />stylin’ components:</h2>
          <ol>
            <li class="fragment">Manages <u>Specificity</u> and the Cascade</li>
            <li class="fragment">Highly Maintainable (Updating/Refactoring)</li>
            <li class="fragment">Flexibility / Usability</li>
            <li class="fragment">
              Good <abbr title="Developer Experience">DX</abbr> [Inputs]
              <small style="vertical-align: middle">
                (i.e. Style Colocation)
              </small>
            </li>
            <li class="fragment">Low Bloat / Small Size [Outputs]</li>
          </ol>
        </section>
        <section>
          <section>
            <h2>Concepts</h2>
          </section>
          <section>
            <h3>Specificity</h3>
            <blockquote style="font-size: 0.75em">
              Specificity is the means by which browsers decide which CSS
              property values are the most relevant to an element and,
              therefore, will be applied.
            </blockquote>
            <hr />
            <div class="cssinlineeditor" id="specificity">
              <div id="example" class="example">I'm an example! √</div>
            </div>
          </section>
          <section>
            <h3>:where/:is</h3>
            <blockquote style="font-size: 0.75em">
              <code>:where</code> and <code>:is</code> are specificity
              manipulating pseudo classes. Both match the containing elements.
              However, <code>:where</code> eliminates the specificity of it's
              contained selector whereas <code>:is</code> takes the maximum
              selector value and adds it to the base selector.
            </blockquote>
            <hr />
            <div class="cssinlineeditor" id="specificity2">
              <div id="example2" class="example2">I'm an example 2! √</div>
            </div>
          </section>
          <section>
            <h3>Cascade Layers</h3>
            <blockquote style="font-size: 0.75em">
              Cascade <code>@layer</code>'s are a recent browser addition that
              give you the ability to define layers of specificity for your
              selectors. The order of precedence for layers is the order in
              which layers are declared, named or not, and lower than the styles
              declared outside of a layer.
            </blockquote>
            <hr />
            <div class="cssinlineeditor" id="specificity3">
              <div id="example3" class="example3">I'm an example 3! √</div>
            </div>
          </section>
          <section>
            <h3>Shadow DOM</h3>
            <blockquote style="font-size: 0.55em">
              The Shadow DOM allows hidden DOM trees to be attached to elements
              in the regular DOM tree. Within these hidden DOM trees we can
              encapsulate our styles. We can also choose to ingest outside
              styles via the <code>::part</code> pseudo-element which represents
              an element within a shadow tree that has a matching part
              attribute.
            </blockquote>
            <hr />
            <div class="cssinlineeditor" id="specificity4">
              <div>
                <div id="example4" class="example4">I'm an example 4! √</div>
              </div>
            </div>
          </section>
        </section>
        <section>
          <section>
            <h2>CSS Approaches</h2>
          </section>
          <section>
            <h3>Inline</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr">
              <pre><code class="html">&lt;!-- HTML --&gt;
&lt;div style="color:blue;"&gt;&lt;/div&gt;</code></pre>
              <pre><code class="js">// React
const styles = {
  color: 'blue',
};
&lt;div style={styles} /&gt;
</code></pre>
            </div>
          </section>
          <section>
            <h4>Inline Convention:</h4>
            <ul>
              <li>
                Inline conventions make use of the style attribute on HTML
                elements:
                <pre
                  style="display: inline"
                ><code class="html" style="display:inline;">&lt;div style="color:blue;"&gt;</code></pre>
              </li>
            </ul>
          </section>
          <section>
            <h4>Inline Tooling:</h4>
            <ul style="font-size: 0.7em">
              <li>
                Inline tools construct a JavaScript object and render the
                contents into the style attribute:
              </li>
              <li>
                CSS-in-JS, as a concept, was
                <a href="https://speakerdeck.com/vjeux/react-css-in-js"
                  >born as inline tooling</a
                >.
              </li>
              <li>
                Early CSS-in-JS tooling, like
                <a href="https://github.com/FormidableLabs/radium">Radium</a>,
                leveraged Inline styles.
              </li>
              <li>
                It's common for Inline tooling to shim features like Media
                Queries and Pseudo Classes with JavaScript.
              </li>
            </ul>
            <div style="display: grid; grid-template-columns: 1fr 1fr">
              <pre><code class="js">// React
var styles = {
  background: 'blue',
  border: 0,
  color: 'white',
  // No pseudo's... :(
};</code></pre>
              <pre><code class="js">// Radium
var styles = {
  base: {
    background: 'blue',
    border: 0,
    color: 'white',
    ':hover': { // or :focus/:active
      backgroundColor: 'red'
    },
  },
};</code></pre>
            </div>
          </section>
          <section>
            <h4>Inline as an Output:</h4>
            <ul style="font-size: 0.7em">
              <li>
                High specificity means Inline Styles are essentially immune to
                specificity and cascade issues!
              </li>
              <li>
                Extremely high maintainability! Easy to update AND refactor!
              </li>
              <li>
                Hard to augment with external libraries but won't interfere with
                others.
              </li>
              <li>No support for @rules, pseudo-elements/classes!!</li>
              <li>
                DX is decent. Easy to locate contextual styles. Can be tough to
                use with IDE tooling.
              </li>
              <li>
                Only the CSS neccessary to style the element is used! However,
                it bloats the DOM which is often uncached and no tooling
                optimizations can be performed.
              </li>
            </ul>
          </section>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="node_modules/reveal-css-snippet/css-snippet.js"></script>
    <script>
      Reveal.initialize({
        hash: true,
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });

      const elements = [
        {
          el: document.getElementById("specificity"),
          cssValue: `#example {
	color: gold;
}

.example {
	color: purple;
}`,
        },
        {
          el: document.getElementById("specificity2"),
          cssValue: `div:is(#example2) {
	color: green;
}

div:where(#example2) {
	color: gold;
}

#example2 {
	color: purple;
}`,
        },
        {
          el: document.getElementById("specificity3"),
          cssValue: `.example3 {
	color: purple;
}

@layer {
  #example3 {
	  color: gold;
  }
}`,
        },
        {
          el: document.getElementById("specificity4"),
          cssValue: `#example4 {
	color: gold;
}

.example4 {
	color: purple;
}

::part(example4) {
	color: green;
}`,
        },
      ];

      elements.forEach(({ el, cssValue }) => {
        el.insertBefore(
          RevealCSSSnippet({ cssValue }),
          el.querySelector("div")
        );
      });
    </script>
    <script type="module">
      import { calculate } from "./node_modules/specificity/dist/specificity.mjs";

      function onInput(el) {
        const selectorEls = el.querySelectorAll(
          'code > span[class^="hljs-selector"]'
        );

        Array.from(selectorEls).forEach((sel) => {
          if (!sel.children.length && sel.innerText.trim()) {
            const str = sel.innerText;

            const specificity = calculate(str)[0];
            const isWhereOrIs = str == ":is" || str == ":where";

            specificity.specificityArray.forEach((v, i) => {
              sel.dataset["spec" + i] = isWhereOrIs ? 0 : v;
            });
          }
        });
      }

      elements.forEach(({ el }) => {
        el.addEventListener("input", (evt) => onInput(evt.target));
        el.addEventListener("focusout", (evt) => onInput(evt.target));
        onInput(el);
      });

      // Do shadow dom for example 4
      const shadowCnt = document.getElementById("example4");
      const shadowTarget = shadowCnt.parentElement;
      const shadow = shadowTarget.attachShadow({ mode: "open" });

      shadowCnt.setAttribute("part", "example4");
      shadow.appendChild(shadowCnt);
    </script>
  </body>
</html>
