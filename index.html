<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
    <style>
      span[class^="hljs-selector"][data-spec0] {
        align-items: baseline;
        display: inline-flex;
        gap: 0.25em;
      }

      span[class^="hljs-selector"][data-spec0]::after {
        content: "(" attr(data-spec1) "," attr(data-spec2) "," attr(data-spec3)
          ")";
        font-size: 0.5em;
        font-weight: 400;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>Slide 1</section>
        <section>
          Slide 2
          <aside class="notes">
            <p>Some notes</p>
          </aside>
          <p>Some slide text</p>
          <aside class="notes">
            <p>and some more notes</p>
          </aside>
        </section>
        <section>
          <h3><u>Specificity</u>?</h3>
          <blockquote>
            Specificity is the means by which browsers decide which CSS property
            values are the most relevant to an element and, therefore, will be
            applied.
          </blockquote>
          <hr />
          <div
            id="specificity"
            style="
              align-items: center;
              display: grid;
              grid-template-columns: 1fr 1fr;
            "
          >
            <div id="example" class="example">I'm an example! âˆš</div>
          </div>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="node_modules/reveal-css-snippet/css-snippet.js"></script>
    <script>
      Reveal.initialize({
        hash: true,
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });

      var el = document.getElementById("specificity");

      el.insertBefore(
        RevealCSSSnippet({
          cssValue: `#example {
	color: #fff;
}

.example {
	color: #0f0;
}`,
        }),
        el.querySelector("div")
      );
    </script>
    <script type="module">
      import { calculate } from "./node_modules/specificity/dist/specificity.mjs";

      function onInput() {
        const selectorEls = el.querySelectorAll('span[class^="hljs-selector"]');

        Array.from(selectorEls).forEach((sel) => {
          if (!sel.children.length) {
            const specificity = calculate(sel.innerText)[0];

            specificity.specificityArray.forEach((v, i) => {
              sel.dataset["spec" + i] = v;
            });
          }
        });
      }

      el.addEventListener("input", onInput);
      onInput();

      console.log(calculate(`.example {color: #0f0!important;}`));
    </script>
  </body>
</html>
